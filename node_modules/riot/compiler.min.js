(function(e,t){if(typeof define==="function"&&define.amd)define(["riot"],t);else if(typeof exports==="object")t(require("riot"));else t(e.riot)})(this,function(e){var t={html:{},css:{},js:{coffee:function(e){return CoffeeScript.compile(e,{bare:true})},es6:function(e){return babel.transform(e,{blacklist:["useStrict"]}).code},none:function(e){return e}}};t.js.javascript=t.js.none;t.js.coffeescript=t.js.coffee;e.parsers=t;var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(","),n="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(","),i=["style","src","d"],c=/^<([\w\-]+)>(.*)<\/\1>/gim,s=/=({[^}]+})([\s\/\>])/g,a=/([\w\-]+)=(["'])([^\2]+?)\2/g,o=/{\s*([^}]+)\s*}/g,f=/^<([\w\-]+)\s?([^>]*)>([^\x00]*[\w\/}"']>$)?([^\x00]*?)^<\/\1>/gim,l=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,u=/<style(\s+type=['"]?([^>'"]+)['"]?|\s+scoped)?>([^\x00]*?)<\/style>/gm,p=/(^|\}|\{)\s*([^\{\}]+)\s*(?=\{)/g,d=/\/\*[^\x00]*?\*\//gm,m=/<!--.*?-->/g,g=/<([\w\-]+)([^>]*)\/\s*>/g,v=/^\s*\/\/.*$/gm,h=/\/\*[^\x00]*?\*\//gm,b=/(<input\s[^>]*?)type=['"]number['"]/gm;function w(e,t,r,n,i){return"riot.tag('"+e+"', '"+t+"'"+(r?", '"+r+"'":"")+(n?", '"+n.replace(/'/g,"\\'")+"'":"")+", function(opts) {"+i+"\n});"}function x(t,c,f){var l=e.util.brackets;t=t.replace(l(s),'="$1"$2');t=c.whitespace?t.replace(/\n/g,"\\n"):t.replace(/\s+/g," ");t=t.trim().replace(m,"");t=t.replace(b,"$1riot-type="+l(0)+'"number"'+l(1));t=t.replace(a,function(e,t,n,c){if(c.indexOf(l(0))>=0){t=t.toLowerCase();if(i.indexOf(t)>=0)t="riot-"+t;else if(r.indexOf(t)>=0)t="__"+t}return t+'="'+c+'"'});if(c.expr){t=t.replace(l(o),function(e,t){var r=j(t,c,f).trim().replace(/\r?\n|\r/g,"").trim();if(r.slice(-1)==";")r=r.slice(0,-1);return l(0)+r+l(1)})}t=t.replace(g,function(e,t,r){var i="<"+t+(r?" "+r.trim():"")+">";if(n.indexOf(t.toLowerCase())==-1)i+="</"+t+">";return i});t=t.replace(/'/g,"\\'");t=t.replace(l(/\\{|\\}/g),"\\$&");if(c.compact)t=t.replace(/> </g,"><");return t}function y(e){e=e.replace(v,"").replace(h,"");var t=e.split("\n"),r="";t.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.indexOf("function")==-1){var c=/[{}]/.exec(i.slice(-1)),s=c&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(s&&!/^(if|while|switch|for|catch)$/.test(s[2])){t[n]=s[1]+"this."+s[2]+" = function("+s[3]+") {";if(c[0]=="}"){t[n]+=" "+i.slice(s[0].length-1,-1)+"}.bind(this)"}else{r=s[1]}}}if(e.slice(0,r.length+1)==r+"}"){t[n]=r+"}.bind(this);";r=""}});return t.join("\n")}function k(e,t,r){return t.replace(d,"").replace(p,function(t,r,n){return r+" "+n.split(/\s*,\s*/g).map(function(t){var r=t.trim().replace(/:scope\s*/,"");return r[0]=="@"||r=="from"||r=="to"||/%$/.test(r)?r:e+" "+r+', [riot-tag="'+e+'"] '+r}).join(",")}).trim()}function j(t,r,n){var i=r.parser||(n?e.parsers.js[n]:y);if(!i)throw new Error('Parser not found "'+n+'"');return i(t,r)}function $(t,r){var n=e.parsers.html[t];if(!n)throw new Error('Template parser not found "'+t+'"');return n(r)}function E(t,r,n){if(n=="scoped-css")t=k(r,t);else if(e.parsers.css[n])t=e.parsers.css[n](r,t);return t.replace(/\s+/g," ").replace(/\\/g,"\\\\").replace(/'/g,"\\'").trim()}function O(t,r){r=r||{};if(r.brackets)e.settings.brackets=r.brackets;if(r.template)t=$(r.template,t);t=t.replace(c,function(e,t,n){return w(t,x(n,r),"","","")});return t.replace(f,function(e,t,n,i,c){i=i||"";var s=r.type;if(!c.trim()){i=i.replace(l,function(e,t,r,n){if(r)s=r.replace("text/","");c=n;return""})}var a="css",o="";i=i.replace(u,function(e,t,r,n){if(t&&t.trim()=="scoped")a="scoped-css";else if(r)a=r.replace("text/","");o=n;return""});return w(t,x(i,r,s),E(o,t,a),n,j(c,r,s))})}var C=window.document,T,q;function L(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4&&r.status==200)t(r.responseText)};r.open("GET",e,true);r.send("")}function S(e){var t=/[ \t]+/.exec(e);if(t)e=e.replace(new RegExp("^"+t[0],"gm"),"");return e}function A(e){var t=C.createElement("script"),r=C.documentElement;t.text=O(e);r.appendChild(t);r.removeChild(t)}function H(e){var t=C.querySelectorAll('script[type="riot/tag"]'),r=t.length;function n(){T.trigger("ready");q=true;e&&e()}if(!r){n()}else{[].map.call(t,function(e){var t=e.getAttribute("src");function i(e){A(e);r--;if(!r){n()}}return t?L(t,i):i(S(e.innerHTML))})}}e.compile=function(t,r){if(typeof t=="string"){if(t.trim()[0]=="<"){var n=S(O(t));if(!r)A(n);return n}else{return L(t,function(e){var t=S(O(e));A(t);r&&r(t,e)})}}if(typeof t!="function")t=undefined;if(q)return t&&t();if(T){t&&T.on("ready",t)}else{T=e.observable();H(t)}};var M=e.mount;e.mount=function(t,r,n){var i;e.compile(function(){i=M(t,r,n)});return i};e.mountTo=e.mount});